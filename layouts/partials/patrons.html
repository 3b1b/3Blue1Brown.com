{{ $list := slice }}
{{ $date := .Params.date }}
{{ range site.Data.patrons }}
  {{ $start := time .start }}
  {{ $end := time .end }}
  {{ if ge .amount 16 }}
    {{ if and ($date.After $start) ($date.Before $end) }}
      {{ $list = $list | append .name }}
    {{ end }}
  {{ end }}
{{ end }}

{{ with $list }}
  <section>
    <div class="section">
      <h3 id="patrons">Patrons</h3>
      <p class="center">
        This lesson was made possible by the generosity of our Patrons!
      </p>
      <div class="patrons" data-open="false">
        {{ range $list }}
          <span>{{ . }}</span>
        {{ end }}
      </div>
      {{ partial "clickable" (dict "text" "See More" "onclick" "togglePatrons(this)") }}
    </div>
  </section>
{{ end }}
